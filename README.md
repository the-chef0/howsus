## High-level overview

Please follow the instructions below to reproduce our study. Note that your results might differ because many of our metrics can change over time.

1. Measure energy consumption, RAM usage etc. using EnergiBridge.
2. Measure code metrics using the provided tool (more details below).
3. Clone the repository.
4. Run `pip install -r requirements.txt` to install the dependencies.
5. Note the paths to the CSV files generated by EnergiBridge, and to the JSON file created using the provided tool.
6. Modify `metric-calc.py` to adjust file paths, metric weights, etc.
7. Run `metric-calc.py` to calculate the scores.

## Measuring code metrics

1. Make sure `git` is configured on your shell to allow repository cloning using SSH.
2. Open `howsus.py`.
3. In the `RepoHandler` object, set the parameters as shown below. This object will be responsible for cloning and navigating the remote repo.
```
handler = RepoHandler(
    access_token=[Your Github access token],
    repo_owner=[The username that owns the repo (see repo URL)],
    repo_name="[The name of the repo (see repo URL)]"
)
```
4. In the `CodeMeter` object, you need to point to the subdirectory in the repo that contains the Python files. They are often called `src`.
```
code_meter = CodeMeter(handler=handler,
    py_file_dir=None if the .py files are in the root directory of the cloned repo
    py_file_dir=path/to/dir otherwise
)
```
5. Run `howsus.py` to measure the metrics obtainable from the repository of your chosen library.
6. Go to `security.snyk.io` to look up the pip package corresponding to your library, and note the vulnerability counts.
7. Put the data into JSON file formatted the same way as `github-metrics.json` (or adjust `metric-calc.py` to adapt it to your structure). A convenient way to do this is by creating a Python dictionary and saving it as JSON.